---
import HeadMeta from './HeadMeta.astro';

interface Props {
  title: string;
  description: string;
  permalink: string;
  canonicalUrl?: string;
  includeYTResources?: boolean | null;
}

let { title, description, permalink, canonicalUrl, includeYTResources } =
  Astro.props;
---

<head>
  <HeadMeta
    title={title}
    description={description}
    canonicalUrl={canonicalUrl}
    permalink={permalink}
  />

  <script src="./siteOptions.ts"></script>
  {
    includeYTResources && (
      <link rel="stylesheet" href="/assets/lite-yt-embed.css" />
    )
  }

  <style is:global>
    /* barlow-regular - latin */
    @font-face {
      font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
      font-family: 'Barlow';
      font-style: normal;
      font-weight: 400;
      src: url('/fonts/barlow-v12-latin-regular.eot'); /* IE9 Compat Modes */
      src:
        url('/fonts/barlow-v12-latin-regular.eot?#iefix')
          format('embedded-opentype'),
        /* IE6-IE8 */ url('/fonts/barlow-v12-latin-regular.woff2')
          format('woff2'),
        /* Super Modern Browsers */ url('/fonts/barlow-v12-latin-regular.woff')
          format('woff'),
        /* Modern Browsers */ url('/fonts/barlow-v12-latin-regular.ttf')
          format('truetype'),
        /* Safari, Android, iOS */
          url('/fonts/barlow-v12-latin-regular.svg#Barlow') format('svg'); /* Legacy iOS */
    }
    /* barlow-italic - latin */
    @font-face {
      font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
      font-family: 'Barlow';
      font-style: italic;
      font-weight: 400;
      src: url('/fonts/barlow-v12-latin-italic.eot'); /* IE9 Compat Modes */
      src:
        url('/fonts/barlow-v12-latin-italic.eot?#iefix')
          format('embedded-opentype'),
        /* IE6-IE8 */ url('/fonts/barlow-v12-latin-italic.woff2')
          format('woff2'),
        /* Super Modern Browsers */ url('/fonts/barlow-v12-latin-italic.woff')
          format('woff'),
        /* Modern Browsers */ url('/fonts/barlow-v12-latin-italic.ttf')
          format('truetype'),
        /* Safari, Android, iOS */
          url('/fonts/barlow-v12-latin-italic.svg#Barlow') format('svg'); /* Legacy iOS */
    }
    /* barlow-regular - latin */
    @font-face {
      font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
      font-family: 'Barlow';
      font-style: normal;
      font-weight: 400;
      src: url('../fonts/barlow-v12-latin-regular.eot'); /* IE9 Compat Modes */
      src:
        url('../fonts/barlow-v12-latin-regular.eot?#iefix')
          format('embedded-opentype'),
        /* IE6-IE8 */ url('../fonts/barlow-v12-latin-regular.woff2')
          format('woff2'),
        /* Super Modern Browsers */
          url('../fonts/barlow-v12-latin-regular.woff') format('woff'),
        /* Modern Browsers */ url('../fonts/barlow-v12-latin-regular.ttf')
          format('truetype'),
        /* Safari, Android, iOS */
          url('../fonts/barlow-v12-latin-regular.svg#Barlow') format('svg'); /* Legacy iOS */
    }
    /* barlow-700 - latin */
    @font-face {
      font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
      font-family: 'Barlow';
      font-style: normal;
      font-weight: 700;
      src: url('../fonts/barlow-v12-latin-700.eot'); /* IE9 Compat Modes */
      src:
        url('../fonts/barlow-v12-latin-700.eot?#iefix')
          format('embedded-opentype'),
        /* IE6-IE8 */ url('../fonts/barlow-v12-latin-700.woff2') format('woff2'),
        /* Super Modern Browsers */ url('../fonts/barlow-v12-latin-700.woff')
          format('woff'),
        /* Modern Browsers */ url('../fonts/barlow-v12-latin-700.ttf')
          format('truetype'),
        /* Safari, Android, iOS */
          url('../fonts/barlow-v12-latin-700.svg#Barlow') format('svg'); /* Legacy iOS */
    }
    /* barlow-700italic - latin */
    @font-face {
      font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
      font-family: 'Barlow';
      font-style: italic;
      font-weight: 700;
      src: url('../fonts/barlow-v12-latin-700italic.eot'); /* IE9 Compat Modes */
      src:
        url('../fonts/barlow-v12-latin-700italic.eot?#iefix')
          format('embedded-opentype'),
        /* IE6-IE8 */ url('../fonts/barlow-v12-latin-700italic.woff2')
          format('woff2'),
        /* Super Modern Browsers */
          url('../fonts/barlow-v12-latin-700italic.woff') format('woff'),
        /* Modern Browsers */ url('../fonts/barlow-v12-latin-700italic.ttf')
          format('truetype'),
        /* Safari, Android, iOS */
          url('../fonts/barlow-v12-latin-700italic.svg#Barlow') format('svg'); /* Legacy iOS */
    }

    :root {
      --sidebar-width: 260px;
      --font-mono: Menlo, Consolas, Monaco, Liberation Mono, Lucida Console,
        monospace;
      --background-color: #f2f0e9;
      --text-color: #0b1733;
      --second-text-color: #3f434d;
      --red: #d30e03;
      --orange: #ef5f1f;
      --pink: #c80e84;
      --green: #48a71e;
      --light-blue: #1b81b4;
      --purple: #5741ac;
      --blue: #393f85;
      --accent-color: var(--purple);
      --gradient-color: linear-gradient(
        45deg,
        hsl(3deg 97% 45%) 0%,
        hsl(348deg 100% 45%) 7%,
        hsl(341deg 100% 45%) 14%,
        hsl(334deg 100% 44%) 21%,
        hsl(326deg 100% 41%) 29%,
        hsl(328deg 97% 42%) 36%,
        hsl(357deg 71% 53%) 43%,
        hsl(29deg 100% 39%) 50%,
        hsl(50deg 100% 31%) 57%,
        hsl(82deg 100% 31%) 64%,
        hsl(150deg 100% 32%) 71%,
        hsl(180deg 100% 30%) 79%,
        hsl(200deg 100% 39%) 86%,
        hsl(210deg 100% 41%) 93%,
        hsl(252deg 45% 46%) 100%
      );

      --size-step-0: 1rem;
      --size-step-1: 1.25rem;
      --size-step-2: 1.56rem;
      --size-step-3: 1.95rem;
      --size-step-4: 2.43rem;
    }

    .dark-mode {
      --background-color: #181b3a;
      --text-color: #f2f0e9;
      --second-text-color: #c9c6d1;
      --accent-color: var(--pink);
      --red: #db5c55;
      --pink: #c76399;
      --blue: #548ab7;
      --purple: #867cc0;
    }

    h1,
    h2,
    h3,
    h4,
    strong {
      font-weight: 700;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0px;
      padding: 0px;
    }

    body {
      font-family: sans-serif;
      font-size: 1.2rem;
      line-height: 1.5;
      font-family: 'Barlow', sans-serif;
      background: var(--background-color);
      color: var(--text-color);
    }

    a {
      color: inherit;
      text-underline-offset: 0.16em;
    }

    a.external::after {
      content: url('/assets/external-arrow.svg');
      display: inline-block;
      background-size: 0 0;
      vertical-align: middle;
    }

    .dark-mode a.external::after {
      content: url('/assets/external-arrow-white.svg');
    }

    a:hover {
      text-decoration: underline;
    }

    code,
    pre {
      font-family: var(--font-mono);
      font-size: 1.1rem;
      color: var(--accent-color);
    }

    pre.astro-code {
      padding: 1rem;
    }

    .styled-link-underlines a:not(.lty-playbtn) {
      text-decoration: none;
      background-repeat: no-repeat;
      background-size: 100% 0.24em;
      background-position: 0 114%;
      background-image: linear-gradient(
        45deg,
        var(--accent-color),
        var(--accent-color)
      );
    }

    .styled-link-underlines a.external {
      background-size: calc(100% - 15px) 0.24em;
    }

    .styled-link-underlines a:hover {
      color: var(--accent-color);
    }

    .rainbows .styled-link-underlines a:not(.lty-playbtn) {
      background-image: var(--gradient-color);
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      display: none;
      pointer-events: none;
    }

    article img {
      max-width: 95%;
    }

    @media (min-width: 640px) {
      .cursor-trails canvas {
        display: block;
      }
    }

    @media (max-width: 640px) {
      html,
      body {
        overflow-x: hidden;
      }
    }

    blockquote {
      font-style: italic;
      margin: 1.5em;
      position: relative;
    }

    blockquote::before {
      content: '';
      display: block;
      width: 4rem;
      height: 5rem;
      -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 125' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M23.105,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.006,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.02-0.014c0.212,6.166,5.265,11.103,11.482,11.103c6.352,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.695-7.938v-4.106C34.021,32.625,23.541,42.841,23.105,55.627z'/%3E%3Cpath d='M52.941,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.007,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.021-0.014c0.212,6.166,5.265,11.103,11.481,11.103c6.353,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.694-7.938v-4.106C63.856,32.625,53.378,42.841,52.941,55.627z'/%3E%3C/g%3E%3C/svg%3E");
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 125' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M23.105,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.006,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.02-0.014c0.212,6.166,5.265,11.103,11.482,11.103c6.352,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.695-7.938v-4.106C34.021,32.625,23.541,42.841,23.105,55.627z'/%3E%3Cpath d='M52.941,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.007,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.021-0.014c0.212,6.166,5.265,11.103,11.481,11.103c6.353,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.694-7.938v-4.106C63.856,32.625,53.378,42.841,52.941,55.627z'/%3E%3C/g%3E%3C/svg%3E");
      font-size: 8rem;
      position: absolute;
      font-family: serif;
      background-color: var(--accent-color);
      left: -3.5rem;
      top: -1.5rem;
      line-height: 1;
    }

    blockquote::after {
      transform: rotate(180deg);
      content: '';
      display: block;
      width: 4rem;
      height: 5rem;
      -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 125' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M23.105,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.006,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.02-0.014c0.212,6.166,5.265,11.103,11.482,11.103c6.352,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.695-7.938v-4.106C34.021,32.625,23.541,42.841,23.105,55.627z'/%3E%3Cpath d='M52.941,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.007,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.021-0.014c0.212,6.166,5.265,11.103,11.481,11.103c6.353,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.694-7.938v-4.106C63.856,32.625,53.378,42.841,52.941,55.627z'/%3E%3C/g%3E%3C/svg%3E");
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 125' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M23.105,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.006,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.02-0.014c0.212,6.166,5.265,11.103,11.482,11.103c6.352,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.695-7.938v-4.106C34.021,32.625,23.541,42.841,23.105,55.627z'/%3E%3Cpath d='M52.941,55.627c-0.005,0.138-0.021,0.273-0.021,0.413c0,0.047,0.007,0.092,0.007,0.138 c-0.001,0.092-0.007,0.183-0.007,0.275l0.021-0.014c0.212,6.166,5.265,11.103,11.481,11.103c6.353,0,11.502-5.149,11.502-11.502 c0-5.796-4.292-10.577-9.869-11.372c1.386-4.595,5.645-7.938,10.694-7.938v-4.106C63.856,32.625,53.378,42.841,52.941,55.627z'/%3E%3C/g%3E%3C/svg%3E");
      font-size: 8rem;
      position: absolute;
      font-family: serif;
      background-color: var(--accent-color);
      right: -3rem;
      bottom: -1.5rem;
      line-height: 1;
    }

    .rainbows blockquote::before,
    .rainbows blockquote::after {
      background: var(--gradient-color);
    }
  </style>
</head>
